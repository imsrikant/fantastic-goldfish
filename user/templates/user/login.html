{% extends 'base.html' %}

{% block form %}
  <div class="container py-3">
    <div class="row justify-content-center">
      <div class="col-md-10 col-lg-9 col-xl-9 col-xxl-7">
        <div class="card shadow-lg o-hidden border-0 my-5">
          <div class="card-body p-0">
            <div class="row">
              <div class="col-lg-12">
                <div class="p-5">
                  <div class="text-center">
                    <h4 class="text-dark mb-4">Welcome Back!</h4>
                  </div>
                  <!-- Start: Login Form -->
                  <form class="user">
                    <div class="mb-3">
                      <input class="form-control form-control-user" type="email" id="email" aria-describedby="emailHelp" placeholder="Enter Email Address" name="email" required="" />
                    </div>
                    <div class="mb-3">
                      <input class="form-control form-control-user" type="password" placeholder="Password" name="password" required="" />
                    </div>
                    <!-- Start: Error Message -->
                    <div class="row mb-3">
                      <p id="errorMsg" class="text-danger" style="display:none;">Paragraph</p>
                    </div>
                    <!-- End: Error Message --><button class="btn btn-outline-primary d-block btn-user w-100" id="submitBtn" type="submit">Login</button><hr />
                  </form>
                  <!-- End: Login Form -->
                  <!-- Start: Forgot Password -->
                  <div class="text-center">
                    <a class="small" href="/user/forgot password">Forgot Password?</a>
                  </div>
                  <!-- End: Forgot Password -->
                  <!-- Start: Register -->
                  <div class="text-center">
                    <a class="small" href="/user/signup">Create an Account!</a>
                  </div>
                  <!-- End: Register -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      let email = document.getElementById('email')
      let submitBtn = document.getElementById('submitBtn')
      let errorMsg = document.getElementById('errorMsg')

      function displayErrorMsg(e) {
        errorMsg.style.display = 'block'
        errorMsg.innerHTML = e
        submitBtn.disabled = true
      }

      function hideErrorMsg() {
        errorMsg.style.display = 'none'
        submitBtn.disabled = false
      }

      // Validate email upon change
      email.addEventListener('change', function () {
        // Check if the email is valid using a regular expression (string@string.string)
        if (email.value.match(/^[^@]+@[^@]+\.[^@]+$/)) hideErrorMsg()
        else displayErrorMsg('Invalid email')
      })
    </script>
  </div>
  <!-- End: Ludens Login -->
{% endblock %}
